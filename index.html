<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title>svd.js</title>
    <meta charset="utf-8">
    <meta name="viewport" content="user-scalable=no, initial-scale=1">
    <style>
    </style>
</head>
<body>
    <script src="svd.js"></script>
    <script>
        // Pure JavaScript SVD algorithm.
        // Input: 2-D list (m by n) with m >= n
        // Output: U,W V so that A = U*W*VT
        //
        // -   Translated from python code by TANG ZhiXiong
        // -   GitHub: https://github.com/district10/svd.js
        // -   Origin: http://stitchpanorama.sourceforge.net/Python/svd.py
        // -   FYI: http://stackoverflow.com/questions/960060/singular-value-decomposition-svd-in-php

        "use strict";

        var _writeDoc = true,
            _document = "";

        _print(
            "Pure JavaScript SVD algorithm.\n" +
            "Input: 2-D list (m by n) with m >= n\n" +
            "Output: U,W V so that A = U*W*VT\n" +
            "\n" +
            "-   Translated from python code by TANG ZhiXiong\n" +
            "-   GitHub: https://github.com/district10/svd.js\n" +
            "-   Origin: http://stitchpanorama.sourceforge.net/Python/svd.py\n" +
            "-   FYI: http://stackoverflow.com/questions/960060/singular-value-decomposition-svd-in-php\n\n\n");

        _print( "Usage:\n" +
                "       var a = [\n" +
                "           [22.,10., 2.,  3., 7.],\n" +
                "           [14., 7.,10.,  0., 8.],\n" +
                "           [-1.,13.,-1.,-11., 3.],\n" +
                "           [-3.,-2.,13., -2., 4.],\n" +
                "           [ 9., 8., 1., -2., 4.],\n" +
                "           [ 9., 1.,-7.,  5.,-1.],\n" +
                "           [ 2.,-6., 6.,  5., 1.],\n" +
                "           [ 4., 5., 0., -2., 2.]\n" +
                "       ];\n" +
                "       var ret = svd(a);\n" +
                "       var u, w, v;\n" +
                "       if (ret) {\n" +
                "           u = ret[0];\n" +
                "           w = ret[1];\n" +
                "           v = ret[2];\n" +
                "           _print(a);\n" +
                "           _print(_mult(_mult(u,_diag(w)), _trans(v)));\n" +
                "       }\n\n\n" );

        // u,w,vt = svd(a)
        var a = [
            [22.,10., 2.,  3., 7.],
            [14., 7.,10.,  0., 8.],
            [-1.,13.,-1.,-11., 3.],
            [-3.,-2.,13., -2., 4.],
            [ 9., 8., 1., -2., 4.],
            [ 9., 1.,-7.,  5.,-1.],
            [ 2.,-6., 6.,  5., 1.],
            [ 4., 5., 0., -2., 2.]
        ];
        var ret = svd(a);
        var u, w, v;
        if (ret) {
            u = ret[0];
            w = ret[1];
            v = ret[2];
            _print(a, "a: \n", "\n");
            _print(u, "u: \n", "\n");
            _print(w, "w: \n", "\n");
            _print(v, "v: \n", "\n");
            _print(_mult(_mult(u,_diag(w)), _trans(v)), "u*w*vt: \n", "\n");
        } else {
            _print(a, "failed at svd decomposing a = ");
        }
        if (_writeDoc) {
            document.write("<div><pre><code>" + _document + "</code></pre></div>");
        }
    </script>
</body>
</html>
